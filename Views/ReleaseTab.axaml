<UserControl
    mc:Ignorable="d"
    x:Class="RainbusToolbox.Views.ReleaseTab"
    x:DataType="vm:MainWindowViewModel"
    xmlns="https://github.com/avaloniaui"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:md="clr-namespace:Markdown.Avalonia;assembly=Markdown.Avalonia"
    xmlns:vm="clr-namespace:RainbusToolbox.ViewModels"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*" />
            <!--  Editor  -->
            <ColumnDefinition Width="1*" />
            <!--  Checkboxes  -->
            <ColumnDefinition Width="2*" />
            <!--  Markdown  -->
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <!--  Main content  -->
            <RowDefinition Height="Auto" />
            <!--  Bottom row  -->
        </Grid.RowDefinitions>

        <!--  Text editor  -->
        <Grid
            Grid.Column="0"
            Grid.Row="0"
            Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="20" />
                <RowDefinition Height="*" />
                <RowDefinition Height="20" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="20" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="20" />
            </Grid.ColumnDefinitions>

            <TextBox
                AcceptsReturn="True"
                Background="Transparent"
                BorderBrush="Transparent"
                CaretBrush="White"
                Classes="framed"
                Grid.Column="1"
                Grid.Row="1"
                ScrollViewer.HorizontalScrollBarVisibility="Auto"
                ScrollViewer.VerticalScrollBarVisibility="Auto"
                SelectionBrush="#44FFFFFF"
                Text="{Binding EditorText, Mode=TwoWay}"
                TextWrapping="Wrap" />
        </Grid>

        <!--  Checkboxes + Role box  -->
        <StackPanel
            Grid.Column="1"
            Grid.Row="0"
            HorizontalAlignment="Center"
            Margin="10"
            VerticalAlignment="Center">
            <CheckBox
                Content="Оставить ссылку на релиз"
                IsChecked="{Binding Option1}"
                Margin="5" />
            <CheckBox
                Content="Пингануть роль ниже (Впиши айди)"
                IsChecked="{Binding Option2}"
                Margin="5" />
            <TextBox
                AcceptsReturn="False"
                AcceptsTab="False"
                Classes="framed"
                Height="60"
                Text="{Binding RoleToPing, Mode=TwoWay}" />
        </StackPanel>

        <!--  Markdown preview  -->
        <md:MarkdownScrollViewer
            Grid.Column="2"
            Grid.Row="0"
            Margin="10"
            Markdown="{Binding EditorText}" />

        <!--  Bottom row: Version + Submit  -->
        <StackPanel
            Grid.Column="0"
            Grid.ColumnSpan="3"
            Grid.Row="1"
            HorizontalAlignment="Center"
            Margin="10"
            Orientation="Horizontal"
            Spacing="10"
            VerticalAlignment="Center">

            <!--  Version label + textbox  -->
            <StackPanel
                Orientation="Horizontal"
                Spacing="5"
                VerticalAlignment="Center">
                <TextBlock
                    FontFamily="{StaticResource MikodacsFont}"
                    FontSize="22"
                    Foreground="White"
                    Text="Выпустить версию:"
                    VerticalAlignment="Center" />
                <TextBox
                    Classes="framed"
                    Height="60"
                    HorizontalAlignment="Left"
                    LostFocus="VersionTextBox_OnLostFocus"
                    Text="{Binding Version, Mode=TwoWay}"
                    TextChanging="VersionTextBox_OnTextChanging"
                    VerticalAlignment="Center"
                    Width="200" />
            </StackPanel>

            <!--  Submit button  -->
            <Button
                Classes="header"
                Command="{Binding SubmitCommand}"
                Content="Заебашить"
                Height="60"
                HorizontalAlignment="Center"
                Width="200" />
        </StackPanel>

        <!--  Loading overlay  -->
        <Border
            Background="#80000000"
            HorizontalAlignment="Stretch"
            IsVisible="{Binding IsLoading}"
            VerticalAlignment="Stretch">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <TextBlock
                    FontSize="20"
                    Foreground="White"
                    Margin="0,0,0,10"
                    Text="ЕБАШИМ РЕЛИЗ!!!!!!!!!!!!!!!!!!!!!!!!!!" />
                <ProgressBar
                    IsIndeterminate="True"
                    Margin="0,10,0,0"
                    Width="200" />
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
